# CHAPTER 18 반응형 아키텍처와 어니언 아키텍처

- 반응형 아키텍처(reactive architecture) : **순차적인 액션**을 표현하는 방식을 뒤집음
  - X를 하고 Y를 하는 대신, X가 일어나면 언제나 Y를 수행! like 이벤트 헨들러
    - → 액션에 반응하는 액션을 지정해 순차적 액션의 순서를 바꿈
  - → 감시자(watcher/observer/listener/callback/event handler)를 두어 변경 감지
  - `ValueCell`을 일관되게 유지하기 위한 안내
    - 올바른 값으로 초기화
    - update()에는 계산만 전달
    - 계산은 올바른 값이 주어졌다면 올바른 값을 리턴
  - 반응형 아키텍처가 바꾼 시스템의 결과
    1. **원인과 효과가 결합된 것을 분리**
    2. 여러 단계를 파이프라인으로 처리
    3. 타임라인이 유연해짐
- 어니언 아키텍처(onion architecture) : 함수형 프로그래밍으로 현실 세계를 다루기 위한 고수준의 개념 → 서비스의 모든 단계에서 사용

  - 인터랙션 계층
    - 바깥세상에 영향을 주거나 받는 액션 → 현실 세계와 상호작용
  - 도메인 계층
    - 비즈니스 규칙을 정의하는 계산
    - 도메인 규칙(=비즈니스 규칙) = 프로그램의 핵심 로직 → 도메인 용어를 사용
  - 언어 계층
    - 언어 유틸리티와 라이브러리
  - → 계층에서 호출하는 방향은 중심 방향, 계층은 외부에 어떤 계층이 있는지 모름

  - 특정 패러다임의 장점이 항상 좋은 것은 아님
    - 코드의 가독성
      - 일반적으로 함수형 코드가 읽기 좋기는 하나, 도메인 계층을 계산으로 만들어 인터랙션 계층과 분리하면서 읽기 좋은 코드를 만들어야 함 → 계산 추출, 함수형 도구로 코드를 연결, 타임라인 관리
    - 개발 속도
    - 시스템 성능
      - 시스템 성능과 타협해야하기도 함 → 변경 가능한 데이터 구조는 불변 데이터 구조보다 빠름 → 성능 개선과 도메인을 계산으로 만드는 것을 따로 생각하는 게 좋음
      - 최적화는 인터랙션 계층에서 하고, 도메인 계층은 재사용 가능한 계산 으로 만드는 것
