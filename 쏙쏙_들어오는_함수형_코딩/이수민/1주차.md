# Chapter 1 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다.

- 부수 효과 : 함수에서 리턴값 이외에 하는 모든 일/행동
  - → SW를 실행하는 이유! ex. 이메일 전송
  - → 함수형 프로그래머는 부수 효과를 잘 다루는 것이 중요
- 순수 함수 : 인자에만 의존하고 부수 효과가 없는 함수

- 액션 : 호출 시점, 횟수에 의존 → 호출 시 주의 필요
- 계산 : 입력값으로 출력값을 만듦. (호출 시점, 횟수에 의존 X, 실행 O)
  - → 테스트하기 쉽고, 언제든 몇 번을 불러도 안전
- 데이터 : 이벤트에 대해 기록한 사실 (호출 시점, 횟수에 의존 X, 실행 X)

  - → 그 자체로 의미가 있음, 같은 데이터로 여러 해석 가능

## 액션, 계산 데이터로 구분 시 장점

- 함수형 프로그래밍은 분산 시스템에 잘 어울림
  - → 코드를 데이터, 계산으로 바꿀수록 코드를 더 쉽게 이해 가능 + 심각한 버그 방지
  - → 액션은 코드 전체에 영향을 주지 않도록 격리하면 됨

## 함수형 사고가 무엇인가요?

- 함수형 프로그래머가 소프트웨어 문제를 해결하기 위해 사용하는 기술과 생각
  1. 액션, 계산 데이터를 구분해 생각
     - → 코드 구분 방법, 액션을 계산으로 리팩토링하기, 액션을 쉽게 다루는 방법, 유지보수/재사용성/테스트 용이성에 대한 근거
  2. 일급 추상(first-class abstraction)
     - → 함수에 함수를 넘기는 걸 어떻게 하는지, 남용하지 않기 위한 방법, 반응형 아키텍쳐와 어니언 아키텍처를 일급 추상과 연결

# Chapter 2 현실에서의 함수형 사고

- 토니 피자

## 파트 1: 액션과 계산, 데이터

- 액션 : 자원(오븐, 배달) 및 요리 재료 사용
- 계산 : 어떤 것을 결정하거나 계획하는 것(조리법에 따라 만들기, 소핑 목록 등) → 아무 때나 사용 가능
- 데이터 : 결제, 재고, 피자 조리법 등 → 저장 or 네트워크 전송 등에 사용 가능

## 변경 가능성에 따라 코드 나누기

### 계층화 설계 맛보기

- 자주 바뀌지 않는 것 ↔ 자주 바뀌는 것
  - 자주 바뀌지 않는 것 : 자바스크립트 언어 자체
  - 중간 : 피자 조리법 순
  - 자주 바뀌는 것 : 이번주 메뉴 서
- → 각 계층은 그 아래에 있는 계층을 기반으로 만들어짐
  - 자주 바뀌지 않는 것 → 의존성이 많아 바꾸기 어렵지만, 자주 바뀌지 않음
  - 자주 바뀌는 것 → 의존성이 거의 없어 쉽게 바꿀 수 있음
- → 계층형 설계(stratified design)
  - 비즈니스 규칙, 도메인 규칙, 기술 스택 계층으로 나눔
  - 테스트, 재사용, 유지보수가 쉬움

## 파트 2: 일급 추상

### 주방을 자동화 하기

- 타임라인 다이어그램 : 로봇 한 대가 피자를 만들기 위한 액션들
  - → 액션이 시간 순서에 따라 어ㄸ허게 실행되는지 볼 수 있음
  - 서로 다른 타임 라인에 있는 액션 간 실행 순서 보장 X
    - → 타임라인을 서로 맞추지 않은 분산 시스템은 예측 불가능한 순서로 실행됨
  - 액션이 실행되는 시간은 중요하지 않음
    - → 각각 타임라인은 다른 타임라인의 순서와 관계없이 만들어야 함
  - 드물지만 타이밍이 어긋나는 경우가 실제로 발생
  - 타임라인 다이어그램으로 시스템의 문제 파악 가능

### 타임라인 커팅: 로봇이 서로를 기다릴 수 있게 하기

- 타임라인 커팅(cutting) : 여러 타임라인이 동시에 진행될 때 서로 순서를 맞추는 방법
  - 고차 동작(high-order operation)으로 구현
  - 각 타임라인은 독립적으로 동작 & 작업 완료 시 다른 타임라인이 끝나길 기다림
- → 서로 다른 작업들을 쉽게 이해 가능
  - 동시에 할 수 있는 일을 분리
- → 시간에 따라 진행하는 작업을 쉽게 이해 가능 (시각화)
- → 유연함 (시각화로 쉽게 코드로 옮기고, 모델링 가능)

# Chapter 3 액션과 계산, 데이터의 차이를 알기

|                         액션                         |                  계산                   |                           데이터                            |
| :--------------------------------------------------: | :-------------------------------------: | :---------------------------------------------------------: |
|                실행 시점, 횟수에 의존                |          입력을 출력으로 계산           |                     이벤트에 대한 사실                      |
| 부수 효과, 부수 효과가 있는 함수, 순수하지 않은 함수 |          순수 함수, 수학 함수           |                                                             |
|        (예) 이메일 보내기, 데이터베이스 읽기         | (예) 최댓값 찾기, 이메일 주소 형식 확인 | (예) 사용자가 입력한 이메일 주소, 은행 API로 읽은 달러 수량 |

- 각 개발 과정에서 액션, 계산, 데이터 구분 방법
  1. 문제에 대해 생각할 때
     - 코드 작성 시, 특별히 주의해야 할 부분(액션), 데이터로 처리해야 할 부분, 결정을 내려야 하는 부분(계산)
  2. 코딩할 때
     - 최대한 액션에서 계산을 빼내고, 액션을 계산으로 바꿀 수 있는지 고민
     - 계산에서 데이터를 분리하거나 데이터로 변경할 수 있는지 고민
  3. 코드를 읽을 때
     - 코드가 어디에 속하는지 확인. 특히 액션은 시간에 의존적이라 숨어있는 것까지 찾아야 함
     - 더 좋은 코드를 만들기 위해 기존 코드를 리팩토링하는 방법을 찾음

### 장보기 과정에서 배운 것

- 액션 안에는 계산과 데이터, 또 다른 액션이 숨어 있을 수 있음
- 계산은 더 작은 계산과 데이터로 나누고 연결 가능
- 데이터는 데이터만 조합 가능 → 가장 먼저 찾아야 함
- 계산은 우리의 사고 과정에 녹아있을 수 있음 → 결정과 계획은 계산을 가능성이 높음

### 쿠폰 보내는 과정 구현하기

- 데이터 → 계산 → 액션 순으로 구현하는게 일반적인 함수형 프로그래밍 구현 순서

### 액션은 코드 전체로 퍼집니다

- 액션을 부르는 함수는 그 함수도 액션이 됨 → 작은 액션 하나가 코드 전체로 퍼져 나감 → 코드가 복잡해짐

### 액션은 다양한 형태로 나타납니다

- 함수 호출
- 메서드 호출
- 생성자
- 표현식 → 변수/속성/배열 참조
- 상태 → 값 할당, 속성 삭제
